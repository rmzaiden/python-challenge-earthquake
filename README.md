# Getting Started

### Prerequisites

```sh
make setup
```

Remember that active venv before run the commands.

```sh
. .venv/bin/activate
```

### Run environment

tdb

---

# Database Migrations (Alembic)

Alembic is a database migration tool that provides version control for schema changes, allowing incremental updates. It integrates seamlessly with SQLAlchemy, supports SQL and Python for migrations, and facilitates tracking and reversing schema modifications. Alembic is compatible with SQL Server and enhances data security through controlled schema updates, making it ideal for professional and scalable environments.

Create a new migration:

```sh
db-migrate msg="some msg"
```

You need check de migration file generated by the last command and if all is correct, then run the command bellow:

```sh
db-upgrade
```
[Reference](https://alembic.sqlalchemy.org/en/latest/tutorial.html#create-a-migration-script)

--

Downgrade to a previous version:

```sh
alembic downgrade -1
```
[Reference](https://alembic.sqlalchemy.org/en/latest/tutorial.html#downgrading)

---

# Tests

Located in `tests` folder. The structure is:
```sh
tests
    ├── __init__.py
    ├── conftest.py
    └── unit
```

Run command:
```sh
make test
```

Run coverage:
```sh
make test-coverage
coverage html
```
---

# Docker Images

- [Azure Function](https://hub.docker.com/_/microsoft-azure-functions-python) (based)
- [SQL Server](https://hub.docker.com/_/microsoft-azure-sql-edge)
- [Azurite](https://hub.docker.com/_/microsoft-azure-storage-azurite)
- [Grafana](https://hub.docker.com/r/grafana/grafana)
- [Loki](https://hub.docker.com/r/grafana/loki)